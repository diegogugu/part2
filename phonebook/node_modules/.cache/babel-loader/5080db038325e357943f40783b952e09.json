{"ast":null,"code":"var _jsxFileName = \"/Users/diego/Documents/GitHub/part-2/phonebook/src/App.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport Filter from './Filter';\nimport PersonForm from './PersonForm';\nimport Persons from './Persons';\nimport personService from './services/persons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [persons, setPersons] = useState([]);\n  const [filteredPersons, setFilteredPersons] = useState(persons);\n  const [filteredValue, setFilteredValue] = useState('');\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [successMessage, setSuccessMessage] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n\n  const getPerson = () => {\n    personService.getAll().then(response => {\n      const persons = response.data;\n      setPersons(persons);\n    }, err => {\n      setPersons([{\n        name: 'error loading persons'\n      }]);\n    });\n  };\n\n  useEffect(() => getPerson, []);\n\n  const addName = event => {\n    event.preventDefault();\n\n    if (newName && newName !== '' && newNumber && newNumber !== '') {\n      if (personDoesntExists(newName)) {\n        personService.create({\n          name: newName,\n          number: newNumber,\n          id: Date.now()\n        }).then(response => {\n          setPersons([...persons, response.data]);\n          setNewName('');\n          setNewNumber('');\n          setSuccessMessage(`Added ${response.data.name}`);\n          setTimeout(() => {\n            setSuccessMessage('');\n          }, 2000);\n        }, err => alert(err));\n        console.log(persons);\n      } else {\n        updateUser();\n      }\n    }\n  };\n\n  const personDoesntExists = name => {\n    return !persons.find(persona => persona.name.toLowerCase() === name.toLowerCase());\n  };\n\n  const handleNameChange = event => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = event => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilterValues = event => {\n    setFilteredValue(event.target.value);\n    setFilteredPersons(persons.filter(persona => persona.name.toLowerCase().includes(event.target.value.toLowerCase())));\n  };\n\n  const handleDelete = personToDelete => {\n    if (window.confirm(`Delete ${personToDelete.name}?`)) {\n      personService.remove(personToDelete.id).then(response => {\n        setPersons(persons.filter(persona => persona.id !== personToDelete.id));\n      }, error => {\n        setErrorMessage(`Information of ${personToDelete.name} has already been removed from server`);\n        setTimeout(() => setErrorMessage(''), 5000);\n      });\n    }\n  };\n\n  const updateUser = () => {\n    if (window.confirm(`${newName.toLowerCase()} is already added to phonebook, replace the old number with a new one?`)) {\n      const found = {\n        name: newName,\n        number: newNumber,\n        id: persons.find(persona => persona.name.toLowerCase() === newName.toLowerCase()).id\n      };\n      personService.update(found).then(res => {\n        setPersons(persons.map(item => item.id === res.data.id ? res.data : item));\n        setSuccessMessage(`Added ${res.data.name}`);\n        setTimeout(() => {\n          setSuccessMessage('');\n        }, 2000);\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Phonebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: successMessage ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"success\",\n        children: successMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 27\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)\n    }, void 0, false), /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: errorMessage ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error\",\n        children: errorMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)\n    }, void 0, false), /*#__PURE__*/_jsxDEV(Filter, {\n      handleFilterValues: handleFilterValues,\n      filteredValue: filteredValue\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"add a new\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PersonForm, {\n      addName: addName,\n      handleNameChange: handleNameChange,\n      handleNumberChange: handleNumberChange,\n      newName: newName,\n      newNumber: newNumber\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Numbers\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Persons, {\n      persons: persons,\n      filteredValue: filteredValue,\n      filteredPersons: filteredPersons,\n      handleDelete: handleDelete\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"N8e1JFNfZjQ23DZkp+2MJhG1jCY=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useState","useEffect","Filter","PersonForm","Persons","personService","App","persons","setPersons","filteredPersons","setFilteredPersons","filteredValue","setFilteredValue","newName","setNewName","newNumber","setNewNumber","successMessage","setSuccessMessage","errorMessage","setErrorMessage","getPerson","getAll","then","response","data","err","name","addName","event","preventDefault","personDoesntExists","create","number","id","Date","now","setTimeout","alert","console","log","updateUser","find","persona","toLowerCase","handleNameChange","target","value","handleNumberChange","handleFilterValues","filter","includes","handleDelete","personToDelete","window","confirm","remove","error","found","update","res","map","item"],"sources":["/Users/diego/Documents/GitHub/part-2/phonebook/src/App.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport Filter from './Filter';\nimport PersonForm from './PersonForm';\nimport Persons from './Persons';\nimport personService from './services/persons';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [filteredPersons, setFilteredPersons] = useState(persons);\n  const [filteredValue, setFilteredValue] = useState('');\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [successMessage, setSuccessMessage] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n  const getPerson = () => {\n    personService\n      .getAll()\n      .then(response => {\n        const persons = response.data;\n        setPersons(persons);\n      }, err => { setPersons([{ name: 'error loading persons' }]) })\n  }\n\n  useEffect(() => getPerson, [])\n\n  const addName = (event) => {\n    event.preventDefault();\n    if (newName && newName !== '' && newNumber && newNumber !== '') {\n      if (personDoesntExists(newName)) {\n        personService.create({ name: newName, number: newNumber, id: Date.now() })\n          .then(response => {\n            setPersons([...persons, response.data]);\n            setNewName('');\n            setNewNumber('');\n            setSuccessMessage(`Added ${response.data.name}`)\n            setTimeout(() => {\n              setSuccessMessage('');\n            }, 2000)\n          }, err => alert(err));\n        console.log(persons);\n      } else {\n        updateUser();\n      }\n    }\n  }\n\n  const personDoesntExists = (name) => {\n    return !persons.find(persona => persona.name.toLowerCase() === name.toLowerCase());\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  }\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  }\n\n  const handleFilterValues = (event) => {\n    setFilteredValue(event.target.value);\n    setFilteredPersons(persons.filter(persona => persona.name.toLowerCase().includes(event.target.value.toLowerCase())));\n  }\n\n  const handleDelete = (personToDelete) => {\n    if (window.confirm(`Delete ${personToDelete.name}?`)) {\n      personService.remove(personToDelete.id)\n        .then(response => {\n          setPersons(persons.filter(persona => persona.id !== personToDelete.id));\n        }, error => {\n          setErrorMessage(`Information of ${personToDelete.name} has already been removed from server`);\n          setTimeout(() => setErrorMessage(''), 5000);\n        });\n    }\n  }\n\n  const updateUser = () => {\n    if (window.confirm(`${newName.toLowerCase()} is already added to phonebook, replace the old number with a new one?`)) {\n      const found = { name: newName, number: newNumber, id: persons.find(persona => persona.name.toLowerCase() === newName.toLowerCase()).id };\n      personService.update(found).then(res => {\n        setPersons(persons.map(item => item.id === res.data.id ? res.data : item))\n        setSuccessMessage(`Added ${res.data.name}`)\n        setTimeout(() => {\n          setSuccessMessage('');\n        }, 2000)\n      });\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <>{successMessage ? <div className='success'>{successMessage}</div> : <></>}</>\n      <>{errorMessage ? <div className='error'>{errorMessage}</div> : <></>}</>\n      <Filter handleFilterValues={handleFilterValues} filteredValue={filteredValue} />\n      <h2>add a new</h2>\n      <PersonForm addName={addName} handleNameChange={handleNameChange} handleNumberChange={handleNumberChange} newName={newName} newNumber={newNumber} />\n      <h2>Numbers</h2>\n      <Persons persons={persons} filteredValue={filteredValue} filteredPersons={filteredPersons} handleDelete={handleDelete} />\n    </div>\n  )\n}\n\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module"}